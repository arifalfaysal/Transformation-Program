<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recomp Tracker | IGNITE</title>
    <link rel="icon" type="image/x-icon" href="https://placehold.co/32x32/DC2626/FFFFFF?text=R">
    <link rel="stylesheet" href="inter.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --background: #000000;
            --surface-primary: #121212;
            --surface-secondary: #1A1A1A;
            --primary: rgb(220, 38, 38); /* Intense Red */
            --primary-glow: rgba(220, 38, 38, 0.3);
            --text-primary: #FFFFFF;
            --text-secondary: #A0A0A0;
            --text-tertiary: #5F5F6D;
            --border-primary: #2A2A2A;
            --border-secondary: #3D3D3D;
            --success: rgb(0, 255, 127); /* Spring Green */
            --success-glow: rgba(0, 255, 127, 0.2);
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: 'InterDisplay', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            background-image: radial-gradient(circle at top, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0) 25%);
            background-attachment: fixed;
        }

        .day-tabs button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            box-shadow: 0 4px 15px -10px var(--primary-glow);
        }
        .day-tabs button.day-complete .day-name { color: var(--success); }
        .day-tabs button.day-complete .completion-dot {
            background-color: var(--success);
            box-shadow: 0 0 8px var(--success-glow);
        }

        .exercise-card {
            background-color: var(--surface-primary);
            border: 1px solid var(--border-primary);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(15px);
        }
        .exercise-card:hover { border-color: var(--border-secondary); transform: translateY(12px) scale(1.01); }
        .exercise-card.visible { opacity: 1; transform: translateY(0); }
        .exercise-card.completed {
            background-color: rgba(0, 255, 127, 0.05);
            border-color: rgba(0, 255, 127, 0.3);
        }
        .exercise-card.completed .exercise-name {
            text-decoration: line-through;
            color: var(--text-tertiary);
        }
        .exercise-card.rest-day { background-color: var(--surface-secondary); text-align: center; }

        .progress-bar-fg { 
            background: linear-gradient(90deg, var(--primary), #ef4444); 
            transition: width 0.6s cubic-bezier(0.25, 1, 0.5, 1); 
            box-shadow: 0 0 10px var(--primary-glow);
        }

        .custom-checkbox {
            -webkit-appearance: none; appearance: none;
            background-color: var(--surface-secondary);
            border: 2px solid var(--border-primary);
            border-radius: 8px; /* Squared off */
            width: 28px; height: 28px;
            cursor: pointer; transition: all 0.2s ease-in-out;
            position: relative;
        }
        .custom-checkbox:hover { border-color: var(--primary); }
        .custom-checkbox:checked { 
            background-color: var(--primary); 
            border-color: var(--primary);
            transform: scale(0.9);
        }
        .custom-checkbox:checked::after {
            content: 'âœ“'; font-size: 20px; font-weight: 900; color: var(--background);
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .section-header {
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
            margin-top: 32px;
        }
        .section-header span { color: var(--primary); }

        /* Modal Styles */
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
            display: flex; justify-content: center; align-items: center;
            z-index: 50; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease;
        }
        .modal-backdrop.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: var(--surface-primary);
            border: 1px solid var(--border-primary);
            padding: 24px; border-radius: 12px;
            width: 90%; max-width: 500px;
            transform: translateY(20px); transition: transform 0.3s ease;
        }
        .modal-backdrop.visible .modal-content { transform: translateY(0); }
    </style>
</head>
<body class="bg-[var(--background)]">

    <div class="container mx-auto max-w-4xl p-4 md:p-6">
        <header class="text-center mb-10">
            <h1 class="text-5xl md:text-6xl font-black text-[var(--text-primary)] uppercase">
                IGNITE<span class="text-[var(--primary)]">.</span>
            </h1>
            <p class="text-[var(--text-secondary)] mt-2 font-medium">20-Week Recomposition Protocol</p>
        </header>

        <!-- Overall Progress -->
        <div class="mb-10 p-5 bg-[var(--surface-primary)] rounded-xl border border-[var(--border-primary)]">
            <div class="flex justify-between items-center mb-3">
                <h3 id="progress-title" class="text-lg font-bold text-[var(--text-primary)]">Total Progress</h3>
                <span id="progress-text" class="font-semibold text-[var(--primary)] text-lg">0%</span>
            </div>
            <div class="w-full h-4 rounded-full bg-[var(--surface-secondary)] overflow-hidden border border-[var(--border-primary)]">
                <div id="progress-bar" class="progress-bar-fg h-full rounded-full" style="width: 0%;"></div>
            </div>
        </div>

        <!-- Controls -->
        <div class="sticky top-0 z-10 bg-black/50 backdrop-blur-lg py-4 -mx-4 px-4 mb-8">
            <div class="week-nav flex items-center justify-between mb-6 max-w-4xl mx-auto">
                <button id="prev-week" class="p-3 rounded-full bg-[var(--surface-secondary)] border border-[var(--border-primary)] transition hover:bg-[var(--primary)] hover:border-[var(--primary)] disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <div class="text-center">
                    <h2 id="week-title" class="text-2xl md:text-3xl font-bold">Week 1</h2>
                    <p id="phase-focus" class="text-[var(--text-secondary)] font-medium">Foundation & Posture</p>
                </div>
                <button id="next-week" class="p-3 rounded-full bg-[var(--surface-secondary)] border border-[var(--border-primary)] transition hover:bg-[var(--primary)] hover:border-[var(--primary)] disabled:opacity-50 disabled:cursor-not-allowed">
                     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
            </div>

            <div class="day-tabs flex justify-around border-b-2 border-[var(--border-primary)] max-w-4xl mx-auto">
                <button data-day="0" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Mon</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
                <button data-day="1" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Tue</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
                <button data-day="2" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Wed</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
                <button data-day="3" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Thu</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
                <button data-day="4" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Fri</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
                <button data-day="5" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Sat</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
                <button data-day="6" class="day-tab flex-1 pb-3 pt-2 font-bold text-[var(--text-secondary)] border-b-2 border-transparent transition text-sm md:text-base"><span class="day-name">Sun</span><div class="completion-dot w-1.5 h-1.5 rounded-full bg-transparent mx-auto mt-1.5 transition"></div></button>
            </div>
        </div>

        <main>
            <h3 id="day-focus-title" class="text-3xl font-extrabold mb-6"></h3>
            <div id="workout-container" class="space-y-4"></div>
        </main>
        
        <footer class="text-center mt-16">
            <button id="reset-btn" class="text-sm text-[var(--text-tertiary)] hover:text-[var(--primary)] transition font-semibold">Reset All Progress</button>
        </footer>
    </div>
    
    <!-- Modals -->
    <div id="reset-modal" class="modal-backdrop"><div class="modal-content"><h3 class="text-xl font-bold mb-2">Confirm Reset</h3><p class="text-[var(--text-secondary)] mb-6">This will permanently delete all tracked progress. This action cannot be undone.</p><div class="flex justify-end space-x-3"><button id="cancel-reset-btn" class="px-5 py-2 rounded-lg bg-[var(--surface-secondary)] hover:bg-[var(--border-primary)] transition font-semibold">Cancel</button><button id="confirm-reset-btn" class="px-5 py-2 rounded-lg bg-red-600 hover:bg-red-500 transition font-semibold">Reset</button></div></div></div>
    <div id="note-modal" class="modal-backdrop"><div class="modal-content"><h3 id="note-title" class="text-xl font-bold mb-3 text-[var(--primary)]"></h3><p id="note-text" class="text-[var(--text-secondary)] mb-6 whitespace-pre-line leading-relaxed"></p><div class="flex justify-end"><button id="close-note-btn" class="px-5 py-2 rounded-lg bg-[var(--primary)] hover:opacity-90 transition font-semibold">Got It</button></div></div></div>

    <script>
        const programData = {
            phase1: { // Weeks 1-8
                weeks: 8, name: "Foundation & Posture Correction",
                days: [
                    { day: "Mon", focus: "PULL", sections: {
                        warmup: [{ name: "Standard Upper Body Warm-up", sets: "5-10 mins", note: "Complete the full warm-up protocol: Arm Circles, Leg Swings, Torso Twists, Scapular Wall Slides, Arm Crossovers, Band Pull-Aparts, Push-up to Downward Dog, Doorway Chest Stretch."}],
                        workout: [
                            { name: "Inverted Rows", sets: "4 sets of AMRAP", note: "AMRAP = As Many Reps As Possible with perfect form. Keep body straight. Pull chest to bar/towel. Squeeze back hard." },
                            { name: "Single-Arm DB Row", sets: "4 sets of 10-12 reps/side", note: "Flat back is critical. Pull elbow towards the ceiling, dumbbell towards your hip. Control the negative (lowering) for 2-3 seconds." },
                            { name: "Band Pull-Aparts", sets: "3 sets of 15-20 reps", note: "Arms straight, palms down. Initiate by squeezing shoulder blades together. Do not use momentum. Focus on rear delts." },
                            { name: "Scapular Pull-ups", sets: "3 sets of 8-12 reps", note: "Hang from a bar. Without bending arms, pull your shoulder blades down and back, lifting your body slightly. This is a small but crucial movement for back activation." },
                            { name: "DB Bicep Curls", sets: "3 sets of 10-15 reps", note: "Keep elbows pinned to your sides. No swinging. Squeeze bicep at the top and control the negative." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Lat stretch, chest stretch, upper trap stretch, shoulder rolls."}]
                    }},
                    { day: "Tue", focus: "LOWER", sections: {
                        warmup: [{ name: "Standard Lower Body Warm-up", sets: "5-10 mins", note: "Complete the full warm-up protocol: Bodyweight Squats, Walking Lunges, Hip Circles, Leg Swings, Glute Bridges."}],
                        workout: [
                            { name: "DB Goblet Squats", sets: "4 sets of 10-15 reps", note: "Hold one dumbbell vertically against your chest. Keep chest up, back straight. Squat as deep as possible without your back rounding. Drive through heels." },
                            { name: "DB Romanian Deadlifts", sets: "4 sets of 12-15 reps", note: "Slight bend in knees. Hinge at the hips, pushing your butt back. Keep DBs close to legs. Feel a deep stretch in hamstrings. Squeeze glutes to return to start." },
                            { name: "Glute Bridges", sets: "4 sets of 15-20 reps", note: "Lie on your back, knees bent. Drive through heels, lifting your hips. Squeeze glutes hard at the top for 2 seconds. Can place DB on hips for added weight." },
                            { name: "DB Standing Calf Raises", sets: "4 sets of 15-20 reps", note: "Stand on a step or plate to get a deeper stretch. Pause for a second at the bottom and 2 seconds at the top (full contraction)." },
                            { name: "Plank", sets: "3 sets of 45-60s hold", note: "Body in a straight line from head to heels. Brace your core as if you're about to be punched. Don't let hips sag." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Quad stretch, hamstring stretch, pigeon pose for glutes, calf stretch."}]
                    }},
                    { day: "Wed", focus: "REST", sections: { workout: [{ name: "Active Recovery", sets: "20-30 minutes", note: "Light activity like walking, stretching, or foam rolling. Promotes recovery." }] }},
                    { day: "Thu", focus: "PUSH", sections: {
                        warmup: [{ name: "Standard Upper Body Warm-up", sets: "5-10 mins", note: "Complete the full warm-up protocol."}],
                        workout: [
                            { name: "Incline Push-ups", sets: "4 sets of AMRAP", note: "Hands on a raised surface (bench, table). The higher the surface, the easier. Maintain a straight body line. Control the movement." },
                            { name: "Pike Push-ups", sets: "4 sets of AMRAP", note: "From a downward dog position, bend elbows and lower the top of your head towards the floor. This targets the shoulders." },
                            { name: "DB Floor Press", sets: "4 sets of 10-12 reps", note: "Lie on the floor. This limits range of motion to protect shoulders. Press DBs up, squeezing the chest at the top." },
                            { name: "DB Lateral Raises", sets: "4 sets of 12-15 reps", note: "Slight bend in elbows. Raise arms out to the side up to shoulder height. Lead with the elbows, not the hands. No swinging." },
                            { name: "DB Overhead Triceps Extension", sets: "3 sets of 12-15 reps", note: "Hold one DB with both hands over your head. Lower it behind your head by bending your elbows. Keep elbows tucked in. Extend back up." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Focus on chest and shoulder stretches."}]
                    }},
                    { day: "Fri", focus: "UPPER", sections: {
                        warmup: [{ name: "Standard Upper Body Warm-up", sets: "5-10 mins", note: "Complete the full warm-up protocol."}],
                        workout: [
                            { name: "Push-ups", sets: "3 sets of AMRAP", note: "Perform as many reps as possible with perfect form. If you can't do a standard push-up, do them on your knees or continue with incline push-ups." },
                            { name: "Inverted Rows", sets: "3 sets of AMRAP", note: "This is your second time this week. Try to beat your previous rep count. Form is king." },
                            { name: "DB Overhead Press", sets: "4 sets of 10-12 reps", note: "Sit or stand. Press DBs from shoulder height to overhead. Keep core tight to prevent back arching." },
                            { name: "DB Bent-Over Row", sets: "4 sets of 10-12 reps", note: "Use both arms. Hinge at hips with a flat back. Row both DBs towards your hips, squeezing your back muscles." },
                            { name: "Farmer's Walk", sets: "3 sets of 45-60s", note: "Hold a heavy DB in each hand. Walk with chest up, shoulders back and down. This builds grip, traps, and core stability." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Full upper body static stretching."}]
                    }},
                    { day: "Sat", focus: "REST", sections: { workout: [{ name: "Light Activity", sets: "As desired", note: "A walk, hike, or light cardio is great. Listen to your body." }] }},
                    { day: "Sun", focus: "COMPLETE REST", sections: { workout: [{ name: "Total Recovery", sets: "Full day", note: "Focus on nutrition, hydration, and sleep. This is when you grow." }] }}
                ]
            },
            phase2: { // Weeks 9-16
                weeks: 8, name: "Hypertrophy & Mass Building",
                days: [
                    { day: "Mon", focus: "PULL", sections: {
                        warmup: [{ name: "Modified Warm-up", sets: "5-10 mins", note: "Standard warm-up plus 1-2 light sets of your first exercise."}],
                        workout: [
                            { name: "Weighted Inverted Rows", sets: "4 sets of 8-12 reps", note: "Place a weight plate on your chest or wear a backpack. Aim for progressive overload from Phase 1." },
                            { name: "DB 'Barbell' Rows", sets: "4 sets of 8-12 reps", note: "Since you don't have a barbell, use two DBs and mimic the movement. Heavier than phase 1." },
                            { name: "DB Preacher Curls", sets: "3 sets of 10-12 reps/side", note: "Brace your arm against an incline bench or even your leg. This isolates the bicep." },
                            { name: "Face Pulls", sets: "4 sets of 15-20 reps", note: "Use a resistance band. Pull towards your face while externally rotating shoulders. Great for shoulder health." },
                            { name: "DB Shrugs", sets: "3 sets of 12-15 reps", note: "Hold DBs at your side. Elevate shoulders straight up. Pause for 2 seconds at the top." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Same as Phase 1."}]
                    }},
                    { day: "Tue", focus: "LOWER", sections: {
                        warmup: [{ name: "Modified Warm-up", sets: "5-10 mins", note: "Standard warm-up plus 1-2 light sets of your first exercise."}],
                        workout: [
                            { name: "DB Bulgarian Split Squats", sets: "4 sets of 8-12 reps/leg", note: "Place your back foot on a bench. Go deep. This is a quad and glute destroyer." },
                            { name: "DB Romanian Deadlifts", sets: "4 sets of 10-12 reps", note: "Focus on pushing the hips back and feeling the hamstring stretch. Go heavier than Phase 1." },
                            { name: "DB Goblet Squats (Pause Reps)", sets: "3 sets of 10-12 reps", note: "Pause for 2-3 seconds at the bottom of each squat. This increases time under tension." },
                            { name: "DB Hip Thrust", sets: "4 sets of 12-15 reps", note: "Place your upper back on a bench, feet on the floor. Hold a DB on your hips. Drive hips up and squeeze glutes hard." },
                            { name: "DB 'Leg Press' Calf Raises", sets: "4 sets of 15-20 reps", note: "Mimic a leg press calf raise by sitting on a bench, placing DBs on your knees, and raising your heels." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Same as Phase 1."}]
                    }},
                    { day: "Wed", focus: "REST", sections: { workout: [{ name: "Active Recovery", sets: "20-30 minutes", note: "Light activity like walking, stretching, or foam rolling." }] }},
                    { day: "Thu", focus: "PUSH", sections: {
                        warmup: [{ name: "Modified Warm-up", sets: "5-10 mins", note: "Standard warm-up plus 1-2 light sets of your first exercise."}],
                        workout: [
                            { name: "DB Bench Press", sets: "4 sets of 8-12 reps", note: "If you have a bench. If not, continue with DB Floor Press, but focus on increasing the weight." },
                            { name: "DB Seated Overhead Press", sets: "4 sets of 8-12 reps", note: "Sitting helps isolate the shoulders. Control the negative." },
                            { name: "Decline Push-ups", sets: "3 sets of AMRAP", note: "Elevate your feet on a bench or chair to target the upper chest." },
                            { name: "DB Lateral Raise (Dropset)", sets: "3 sets", note: "Perform 10-12 reps, immediately grab a lighter weight and do AMRAP. That's one set." },
                            { name: "Diamond Push-ups", sets: "3 sets of AMRAP", note: "Hands close together to form a diamond shape. This targets the triceps heavily." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Same as Phase 1."}]
                    }},
                    { day: "Fri", focus: "UPPER", sections: {
                        warmup: [{ name: "Modified Warm-up", sets: "5-10 mins", note: "Standard warm-up."}],
                        workout: [
                            { name: "Pull-ups (Negatives)", sets: "4 sets of 5-8 reps", note: "Jump to the top position of a pull-up and lower yourself as slowly as possible (aim for 3-5 seconds)." },
                            { name: "DB Incline Press", sets: "4 sets of 10-12 reps", note: "Use an incline bench if available. Great for upper chest development." },
                            { name: "DB Seated Lateral Raise", sets: "4 sets of 12-15 reps", note: "Sitting down prevents cheating. Focus on the mind-muscle connection with your side delts." },
                            { name: "DB Hammer Curls", sets: "3 sets of 10-12 reps", note: "Neutral grip (palms facing each other). This hits the brachialis muscle, adding thickness to the arm." },
                            { name: "DB Triceps Kickbacks", sets: "3 sets of 12-15 reps", note: "Hinge at the hips with a flat back. Keep your upper arm parallel to the floor and extend your forearm back." }
                        ],
                        cooldown: [{ name: "Standard Cooldown", sets: "5 mins", note: "Full upper body static stretching."}]
                    }},
                    { day: "Sat", focus: "REST", sections: { workout: [{ name: "Light Activity", sets: "As desired", note: "A walk, hike, or light cardio is great. Listen to your body." }] }},
                    { day: "Sun", focus: "COMPLETE REST", sections: { workout: [{ name: "Total Recovery", sets: "Full day", note: "Focus on nutrition, hydration, and sleep. This is when you grow." }] }}
                ]
            },
            phase3: { // Weeks 17-20
                weeks: 4, name: "Metabolic Cut & Definition",
                days: [
                    { day: "Mon", focus: "FULL BODY A", sections: {
                        warmup: [{ name: "Full Body Dynamic Warm-up", sets: "5-10 mins", note: "Jumping jacks, high knees, butt kicks, arm circles, leg swings, bodyweight squats and lunges."}],
                        workout: [
                            { name: "DB Goblet Squat", sets: "5 sets of 15-20 reps", note: "Higher reps to increase metabolic stress. Keep rest times short (45-60s)." },
                            { name: "Push-ups", sets: "5 sets of AMRAP", note: "Focus on maximum volume. Rest 60s between sets." },
                            { name: "Inverted Rows", sets: "5 sets of AMRAP", note: "Match the volume of your push-ups. Rest 60s." },
                            { name: "DB Overhead Press", sets: "4 sets of 12-15 reps", note: "Lighter weight, higher reps. Focus on the pump." },
                            { name: "DB Renegade Rows", sets: "3 sets of 10-12 reps/side", note: "In a push-up position with hands on DBs, row one DB up at a time. Keep your core tight and hips stable." },
                            { name: "Burpees", sets: "3 sets of AMRAP in 60s", note: "This is your cardio finisher. Go all out for 60 seconds, rest 60 seconds. Repeat." }
                        ],
                        cooldown: [{ name: "Full Body Cooldown", sets: "5 mins", note: "Light stretching for all major muscle groups."}]
                    }},
                    { day: "Tue", focus: "REST", sections: { workout: [{ name: "Active Recovery", sets: "20-30 minutes", note: "A brisk walk is perfect. The goal is to aid recovery, not add stress." }] }},
                    { day: "Wed", focus: "FULL BODY B", sections: {
                        warmup: [{ name: "Full Body Dynamic Warm-up", sets: "5-10 mins", note: "Same as Monday."}],
                        workout: [
                            { name: "DB Romanian Deadlifts", sets: "5 sets of 15-20 reps", note: "Focus on the stretch and squeeze. Keep the weight moderate to maintain form with high reps." },
                            { name: "DB Incline Press", sets: "5 sets of 12-15 reps", note: "If no incline bench, use the floor press. Short rest periods." },
                            { name: "Pull-up Negatives", sets: "5 sets of AMRAP", note: "Control the descent for as long as possible. This is about time under tension." },
                            { name: "DB Lateral Raises", sets: "4 sets of 15-20 reps", note: "High reps to carve out shoulder definition. Feel the burn." },
                            { name: "DB Farmer's Walk", sets: "3 sets of 60s", note: "Go as heavy as you can for the full minute. This builds overall grit and burns calories." },
                            { name: "Mountain Climbers", sets: "3 sets of AMRAP in 60s", note: "Cardio finisher. Keep your core tight and hips low." }
                        ],
                        cooldown: [{ name: "Full Body Cooldown", sets: "5 mins", note: "Light stretching for all major muscle groups."}]
                    }},
                    { day: "Thu", focus: "REST", sections: { workout: [{ name: "Active Recovery", sets: "20-30 minutes", note: "Foam roll any sore muscles." }] }},
                    { day: "Fri", focus: "FULL BODY C (Circuit)", sections: {
                        warmup: [{ name: "Full Body Dynamic Warm-up", sets: "5-10 mins", note: "Same as Monday."}],
                        workout: [
                            { name: "DB Thrusters", sets: "4 rounds of 15 reps", note: "Perform all exercises in the circuit back-to-back with no rest. A thruster is a squat into an overhead press." },
                            { name: "DB Bent-Over Rows", sets: "4 rounds of 15 reps", note: "Move directly from thrusters to rows." },
                            { name: "Pike Push-ups", sets: "4 rounds of AMRAP", note: "Move directly from rows to pike push-ups." },
                            { name: "Plank", sets: "4 rounds of 60s hold", note: "Hold a solid plank for one minute." },
                            { name: "Jumping Jacks", sets: "4 rounds of 60s", note: "Final exercise in the circuit. After this, rest for 60-90s and repeat the entire circuit." }
                        ],
                        cooldown: [{ name: "Full Body Cooldown", sets: "5 mins", note: "Your heart rate will be high. Cool down properly."}]
                    }},
                    { day: "Sat", focus: "REST", sections: { workout: [{ name: "Light Activity", sets: "As desired", note: "A walk, hike, or light cardio is great. Listen to your body." }] }},
                    { day: "Sun", focus: "COMPLETE REST", sections: { workout: [{ name: "Total Recovery", sets: "Full day", note: "This is your final rest day of the week. Eat well and sleep." }] }}
                ]
            }
        };

        const E = {
            prevWkBtn: document.getElementById('prev-week'), nextWkBtn: document.getElementById('next-week'),
            dayTabs: document.querySelectorAll('.day-tab'), wkTitle: document.getElementById('week-title'),
            phFocus: document.getElementById('phase-focus'), dayFocus: document.getElementById('day-focus-title'),
            workoutCont: document.getElementById('workout-container'), progBar: document.getElementById('progress-bar'),
            progText: document.getElementById('progress-text'), progTitle: document.getElementById('progress-title'),
            resetBtn: document.getElementById('reset-btn'),
            resetModal: document.getElementById('reset-modal'), cancelReset: document.getElementById('cancel-reset-btn'),
            confirmReset: document.getElementById('confirm-reset-btn'), noteModal: document.getElementById('note-modal'),
            noteTitle: document.getElementById('note-title'), noteText: document.getElementById('note-text'),
            closeNoteBtn: document.getElementById('close-note-btn'),
        };

        let state = { week: 1, day: 0, completed: {}, totalExercises: 0 };
        const totalWeeks = 20;

        function getPhaseFromWeek(week) {
            if (week <= 8) return { key: 'phase1', data: programData.phase1 };
            if (week <= 16) return { key: 'phase2', data: programData.phase2 };
            return { key: 'phase3', data: programData.phase3 };
        }

        function renderWorkout() {
            const phase = getPhaseFromWeek(state.week);
            const dayData = phase.data.days[state.day];
            E.dayFocus.textContent = `${dayData.day} - ${dayData.focus}`;
            E.workoutCont.innerHTML = '';
            const isRest = dayData.focus.toLowerCase().includes('rest');

            for (const sectionName in dayData.sections) {
                const exercises = dayData.sections[sectionName];
                if (!exercises || exercises.length === 0) continue;
                const header = document.createElement('h4');
                header.className = 'section-header text-2xl font-bold';
                header.innerHTML = `${sectionName.charAt(0).toUpperCase() + sectionName.slice(1)} <span>//</span>`;
                E.workoutCont.appendChild(header);
                exercises.forEach((ex, i) => {
                    const exId = `w${state.week}d${state.day}${sectionName}${i}`;
                    const isDone = state.completed[exId];
                    const card = document.createElement('div');
                    card.className = `exercise-card flex items-center p-4 rounded-xl shadow-md ${isDone ? 'completed' : ''} ${isRest ? 'rest-day' : ''}`;
                    card.innerHTML = `<div class="flex-1 mr-2"><h5 class="exercise-name font-semibold text-md md:text-lg text-[var(--text-primary)]">${ex.name}</h5><p class="text-sm text-[var(--text-secondary)]">${ex.sets}</p></div><div class="flex items-center space-x-2 md:space-x-3"><button class="note-btn p-1" data-note="${ex.note.replace(/"/g, '&quot;')}" data-name="${ex.name}"><svg class="w-6 h-6 stroke-current text-gray-500 hover:text-[var(--primary)] transition" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button>${!isRest ? `<input type="checkbox" data-id="${exId}" class="custom-checkbox" ${isDone ? 'checked' : ''}>` : ''}</div>`;
                    E.workoutCont.appendChild(card);
                    setTimeout(() => card.classList.add('visible'), (E.workoutCont.children.length) * 40);
                });
            }
        }

        function handleCompletion(e) {
            const exId = e.target.dataset.id;
            state.completed[exId] = e.target.checked;
            e.target.closest('.exercise-card').classList.toggle('completed', e.target.checked);
            saveProgress();
            updateAllProgress();
        }

        function updateAllProgress() {
            const doneCount = Object.values(state.completed).filter(Boolean).length;
            const pct = state.totalExercises > 0 ? (doneCount / state.totalExercises) * 100 : 0;
            E.progBar.style.width = `${pct}%`; E.progText.textContent = `${Math.round(pct)}%`;
            
            const currentPhase = getPhaseFromWeek(state.week);
            E.dayTabs.forEach((tab, dayIndex) => {
                const dayData = currentPhase.data.days[dayIndex];
                if (dayData.focus.toLowerCase().includes('rest')) { tab.classList.remove('day-complete'); return; }
                let totalForDay = 0, completedForDay = 0;
                for (const section in dayData.sections) {
                    dayData.sections[section].forEach((ex, i) => {
                        totalForDay++;
                        const exId = `w${state.week}d${dayIndex}${section}${i}`;
                        if (state.completed[exId]) completedForDay++;
                    });
                }
                tab.classList.toggle('day-complete', totalForDay > 0 && completedForDay === totalForDay);
            });
        }

        function updateUI() {
            const phase = getPhaseFromWeek(state.week);
            E.wkTitle.textContent = `Week ${state.week}`;
            E.phFocus.textContent = phase.data.name;
            E.progTitle.textContent = `Total Progress`;
            E.dayTabs.forEach(t => t.classList.toggle('active', parseInt(t.dataset.day) === state.day));
            E.prevWkBtn.disabled = state.week === 1;
            E.nextWkBtn.disabled = state.week === totalWeeks;
            renderWorkout();
            updateAllProgress();
        }

        function saveProgress() {
            try { localStorage.setItem('recompIgniteProgress', JSON.stringify(state.completed)); }
            catch (e) { console.warn("Local storage is unavailable."); }
        }

        function loadProgress() {
            try { 
                const saved = localStorage.getItem('recompIgniteProgress');
                state.completed = saved ? JSON.parse(saved) : {};
             }
            catch (e) { state.completed = {}; }
        }

        function calculateTotalExercises() {
            state.totalExercises = 0;
            for (let week = 1; week <= totalWeeks; week++) {
                const phase = getPhaseFromWeek(week);
                phase.data.days.forEach(day => {
                    if (day.focus.toLowerCase().includes('rest')) return;
                    for (const section in day.sections) {
                        if (section !== 'warmup' && section !== 'cooldown') {
                           state.totalExercises += day.sections[section].length;
                        }
                    }
                });
            }
        }
        
        function setupEventListeners() {
            E.dayTabs.forEach(tab => tab.addEventListener('click', () => { state.day = parseInt(tab.dataset.day); updateUI(); }));
            E.prevWkBtn.addEventListener('click', () => { if(state.week > 1) {state.week--; updateUI();} });
            E.nextWkBtn.addEventListener('click', () => { if(state.week < totalWeeks) {state.week++; updateUI();} });
            E.workoutCont.addEventListener('change', e => e.target.matches('.custom-checkbox') && handleCompletion(e));
            E.workoutCont.addEventListener('click', e => {
                const noteBtn = e.target.closest('.note-btn');
                if(noteBtn) { E.noteTitle.textContent = noteBtn.dataset.name; E.noteText.textContent = noteBtn.dataset.note; E.noteModal.classList.add('visible'); }
            });
            const closeModal = () => { E.noteModal.classList.remove('visible'); E.resetModal.classList.remove('visible'); };
            E.resetBtn.addEventListener('click', () => E.resetModal.classList.add('visible'));
            E.cancelReset.addEventListener('click', closeModal);
            E.confirmReset.addEventListener('click', () => { state.completed = {}; saveProgress(); updateUI(); closeModal(); });
            E.closeNoteBtn.addEventListener('click', closeModal);
            [E.noteModal, E.resetModal].forEach(m => m.addEventListener('click', e => e.target === m && closeModal()));
        }

        function init() {
            const today = new Date().getDay();
            state.day = today === 0 ? 6 : today - 1; 
            loadProgress();
            calculateTotalExercises();
            setupEventListeners();
            updateUI();
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>